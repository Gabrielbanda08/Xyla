<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Wave</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    :root {
      --blue1: #e9770c;
      --blue2: #d1b513;
      --blue3: #f6f464;
      --blue4: #e51e1e;
      --sidebar-width: 230px;
      --gradient: linear-gradient(135deg, var(--blue1) 0%, var(--blue3) 100%);
      --glow: 0 0 18px 4px var(--blue3);
      --radius: 18px;
      --transition: 0.28s cubic-bezier(.4,0,.2,1);
    }
    body {
      margin: 0;
      font-family: 'Segoe UI', 'Roboto', Arial, sans-serif;
      background: linear-gradient(115deg, #141e30 68%, #243b55 100%);
      color: #e3f2fd;
      min-height: 100vh;
      display: flex;
      flex-direction: row;
    }
    #sidebar {
      width: var(--sidebar-width);
      background: var(--gradient);
      box-shadow: 0 0 24px 0 #2196f3cc;
      min-height: 100vh;
      padding: 0;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      position: fixed;
      left: 0;
      top: 0;
      z-index: 20;
    }
    .sidebar-header {
      text-align: center;
      padding: 2.5rem 1rem 1.5rem 1rem;
      font-size: 2.4rem;
      font-weight: 800;
      letter-spacing: .09em;
      color: #fff;
      text-shadow: 0 0 18px var(--blue3), 0 2px 12px #0004;
      user-select: none;
    }
    .sidebar-nav {
      list-style: none;
      margin: 0;
      padding: 0;
    }
    .sidebar-nav li {
      margin: 0.5rem 0;
    }
    .sidebar-link {
      display: flex;
      align-items: center;
      padding: 1rem 2.2rem;
      color: #fff;
      font-size: 1.15rem;
      text-decoration: none;
      border-radius: var(--radius);
      transition: background var(--transition), box-shadow var(--transition), color var(--transition);
      position: relative;
      font-weight: 500;
      cursor: pointer;
      gap: 1rem;
    }
    .sidebar-link:hover, .sidebar-link.active {
      background: #1565c0cc;
      box-shadow: var(--glow);
      color: #fff;
    }
    .sidebar-footer {
      text-align: center;
      padding: 2rem 1rem;
      font-size: 0.98rem;
      color: #b3e5fc;
      opacity: 0.8;
      user-select: none;
    }
    #main-content {
      margin-left: var(--sidebar-width);
      flex: 1;
      min-width: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
      background: transparent;
      transition: background var(--transition);
    }
    .topbar {
      padding: 2rem 2.5rem 1rem 2.5rem;
      display: flex;
      align-items: center;
      gap: 2rem;
      flex-wrap: wrap;
    }
    .search-bar {
      flex: 1;
      position: relative;
      max-width: 400px;
    }
    .search-bar input {
      width: 100%;
      padding: 0.75rem 2.5rem 0.75rem 1rem;
      border-radius: 12px;
      border: none;
      font-size: 1.05rem;
      background: #192742;
      color: #e3f2fd;
      transition: box-shadow var(--transition);
    }
    .search-bar input:focus {
      outline: none;
      box-shadow: var(--glow);
    }
    .search-bar .search-icon {
      position: absolute;
      right: 1.1rem;
      top: 50%;
      transform: translateY(-50%);
      color: #90caf9;
      font-size: 1.35rem;
      pointer-events: none;
    }
    /* Music Cards */
    .music-cards {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 2rem;
      margin: 2rem 2.5rem;
    }
    .music-card {
      background: linear-gradient(135deg, #1976d2 60%, #64b5f6 100%);
      border-radius: var(--radius);
      box-shadow: 0 0 24px 0 #2196f3cc;
      overflow: hidden;
      cursor: pointer;
      transition: box-shadow 0.3s, transform 0.2s;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding-bottom: 1rem;
      min-width: 0;
      position: relative;
    }
    .music-card:hover {
      box-shadow: 0 0 36px 8px #1e88e5cc;
      transform: translateY(-4px) scale(1.04);
    }
    .music-card-cover img {
      width: 100%;
      height: 160px;
      object-fit: cover;
      border-top-left-radius: var(--radius);
      border-top-right-radius: var(--radius);
      box-shadow: 0 4px 18px #1976d288;
      background: #111;
      display: block;
    }
    .music-card-info {
      text-align: center;
      padding: 1rem 0 0.5rem 0;
      width: 90%;
    }
    .music-card-title {
      font-size: 1.15rem;
      font-weight: 700;
      color: #fff;
      letter-spacing: 0.05em;
      margin-bottom: 0.3em;
      word-break: break-word;
      line-height: 1.18;
      text-shadow: 0 1px 8px #1976d288;
    }
    .music-card-artist {
      font-size: 1rem;
      color: #c5e1facc;
      font-weight: 500;
    }
    .music-card-album {
      font-size: 0.9rem;
      color: #bbdefbcc;
      margin-top: 0.15em;
    }
    .music-card-actions {
      margin-top: 0.7em;
      display: flex;
      gap: 1.2em;
      justify-content: center;
      align-items: center;
    }
    .music-card-btn {
      background: #1565c0;
      color: #fff;
      border: none;
      border-radius: 8px;
      padding: 0.5em 0.9em;
      font-size: 1rem;
      cursor: pointer;
      box-shadow: 0 0 8px 0 #64b5f6bb;
      transition: background var(--transition), box-shadow var(--transition), transform 0.18s;
      display: flex;
      align-items: center;
      gap: 0.5em;
    }
    .music-card-btn:hover {
      background: #1e88e5;
      box-shadow: 0 0 16px 2px #64b5f6cc;
      transform: scale(1.07);
    }
    /* Audio Player */
    #audio-player-bar {
      position: fixed;
      bottom: 0;
      left: var(--sidebar-width);
      right: 0;
      background: #192742;
      box-shadow: 0 -6px 24px 0 #1976d2cc;
      display: flex;
      align-items: center;
      gap: 2.2rem;
      padding: 1.2rem 2.5rem;
      z-index: 11;
      transition: left var(--transition);
    }
    .player-cover {
      width: 58px;
      height: 58px;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 0 12px 0 #1976d288;
    }
    .player-cover img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      background: #111;
      display: block;
    }
    .player-info {
      min-width: 120px;
      display: flex;
      flex-direction: column;
      gap: 2px;
      color: #fff;
    }
    .player-title {
      font-size: 1.12rem;
      font-weight: 700;
      letter-spacing: .04em;
      margin-bottom: 0.1em;
      text-shadow: 0 1px 8px #1976d288;
    }
    .player-artist {
      font-size: 0.99rem;
      color: #90caf9;
      font-weight: 500;
    }
    .player-controls {
      display: flex;
      gap: 1.3em;
      align-items: center;
      margin-left: 2em;
    }
    .player-btn {
      background: none;
      border: none;
      color: #64b5f6;
      font-size: 1.35rem;
      cursor: pointer;
      padding: 0.5em;
      border-radius: 50%;
      transition: background var(--transition), color var(--transition), box-shadow var(--transition), transform 0.16s;
    }
    .player-btn:active, .player-btn:hover {
      background: #1565c0;
      color: #fff;
      box-shadow: 0 0 8px 2px #1976d2cc;
      transform: scale(1.16);
    }
    .player-progress {
      flex: 1;
      margin: 0 1.2em;
      display: flex;
      align-items: center;
      gap: 0.7em;
      color: #90caf9;
      min-width: 100px;
    }
    .progress-bar {
      width: 100%;
      background: #111;
      height: 6px;
      border-radius: 6px;
      overflow: hidden;
      cursor: pointer;
      margin: 0 0.4em;
    }
    .progress-bar-inner {
      background: var(--gradient);
      height: 100%;
      width: 0%;
      transition: width 0.18s;
    }
    .player-volume {
      display: flex;
      align-items: center;
      gap: 0.5em;
      margin-left: 1em;
    }
    .player-volume input[type=range] {
      width: 78px;
      accent-color: #2196f3;
    }
    /* Settings Panel */
    #settings-panel {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: #141e3088;
      z-index: 30;
      align-items: center;
      justify-content: center;
    }
    .settings-box {
      background: var(--gradient);
      padding: 2.3rem 2.3rem 2rem 2.3rem;
      border-radius: var(--radius);
      box-shadow: 0 0 42px 0 #2196f3cc;
      min-width: 320px;
      width: 96vw;
      max-width: 390px;
      color: #fff;
      position: relative;
    }
    .settings-title {
      font-size: 1.3rem;
      font-weight: bold;
      margin-bottom: 1.1em;
      text-align: center;
      letter-spacing: 0.05em;
      text-shadow: 0 0 8px #1976d288;
    }
    .settings-row {
      margin-bottom: 1.3em;
      display: flex;
      flex-direction: column;
      gap: 0.3em;
    }
    .settings-label {
      font-size: 1.06rem;
      font-weight: 500;
      margin-bottom: 0.2em;
    }
    .settings-select, .settings-input {
      padding: 0.5em 0.7em;
      border-radius: 7px;
      border: none;
      font-size: 1rem;
      background: #192742;
      color: #fff;
      margin-top: 0.2em;
    }
    .settings-btn-row {
      display: flex;
      justify-content: flex-end;
      gap: 1em;
      margin-top: 1.5em;
    }
    .settings-btn {
      background: #1565c0;
      color: #fff;
      border: none;
      border-radius: 8px;
      padding: 0.5em 1.2em;
      font-size: 1rem;
      cursor: pointer;
      box-shadow: 0 0 8px 0 #64b5f6bb;
      transition: background var(--transition), box-shadow var(--transition), transform 0.18s;
    }
    .settings-btn:hover {
      background: #1e88e5;
      box-shadow: 0 0 16px 2px #64b5f6cc;
      transform: scale(1.07);
    }
    .settings-close {
      position: absolute;
      top: 0.9em;
      right: 1em;
      font-size: 1.3em;
      background: none;
      border: none;
      color: #fff;
      cursor: pointer;
      transition: color var(--transition), transform 0.18s;
    }
    .settings-close:hover {
      color: #bbdefb;
      transform: scale(1.16);
    }
    /* Responsive */
    @media screen and (max-width: 950px) {
      #sidebar {
        width: 70px;
        min-width: 70px;
      }
      .sidebar-header {
        font-size: 1.5rem;
        padding: 1.2rem 0.5rem 1rem 0.5rem;
      }
      .sidebar-link {
        padding: 0.7rem 1rem;
        font-size: 1rem;
        gap: 0.7rem;
        justify-content: center;
      }
      #main-content {
        margin-left: 70px;
      }
      #audio-player-bar {
        left: 70px;
        padding: 0.7rem 1rem;
      }
      .topbar {
        padding: 1.2rem 1rem 0.7rem 1rem;
        gap: 1rem;
      }
      .music-cards {
        margin: 1.2rem 1rem;
        gap: 1.2rem;
      }
    }
    @media screen and (max-width: 600px) {
      #sidebar {
        position: fixed;
        width: 54px;
        min-width: 54px;
        padding: 0;
      }
      .sidebar-header {
        font-size: 1rem;
        padding: 0.7rem 0.2rem 0.7rem 0.2rem;
      }
      .sidebar-link {
        padding: 0.4rem 0.3rem;
        font-size: 0.84rem;
        gap: 0.4rem;
        justify-content: center;
      }
      #main-content {
        margin-left: 54px;
      }
      #audio-player-bar {
        left: 54px;
        padding: 0.5rem 0.2rem;
      }
      .topbar {
        padding: 0.6rem 0.3rem 0.3rem 0.3rem;
        gap: 0.5rem;
      }
      .music-cards {
        margin: 0.6rem 0.3rem;
        gap: 0.7rem;
      }
      .settings-box {
        min-width: 0;
        width: 96vw;
        padding: 1rem 0.7rem 1rem 0.7rem;
      }
    }
  </style>
</head>
<body>
  <nav id="sidebar">
    <div>
      <div class="sidebar-header">Wave</div>
      <ul class="sidebar-nav">
        <li><a class="sidebar-link active" data-section="home"><span></span> Home</a></li>
        <li><a class="sidebar-link" data-section="search"><span></span> Search</a></li>
        <li><a class="sidebar-link" data-section="trending"><span></span> Trending</a></li>
        <li><a class="sidebar-link" data-section="playlists"><span></span> Playlists</a></li>
        <li><a class="sidebar-link" data-section="genres"><span></span> Genres</a></li>
        <li><a class="sidebar-link" data-section="library"><span></span> Library</a></li>
        <li><a class="sidebar-link" data-section="settings"><span>锔</span> Settings</a></li>
      </ul>
    </div>
    <div class="sidebar-footer">
      &copy; 2025 Wave
    </div>
  </nav>
  <main id="main-content">
    <div class="topbar" id="topbar">
      <div class="search-bar">
        <input type="text" id="search-input" placeholder="Search songs, artists, genres...">
        <span class="search-icon"></span>
      </div>
    </div>
    <div id="section-area">
      <div id="music-cards-container" class="music-cards"></div>
    </div>
  </main>
  <!-- Audio Player Bar -->
  <div id="audio-player-bar">
    <div class="player-cover"><img id="player-cover" src="https://th.bing.com/th/id/R.07082c66c44c34233aa278863986f6b2?rik=RPbm5MeYnNGuyg&riu=http%3a%2f%2fvignette2.wikia.nocookie.net%2fe__%2fimages%2f8%2f86%2fNo_cover.png%2frevision%2flatest%3fcb%3d20130103223703%26path-prefix%3deminem&ehk=gMkFf2uEhP4IePCnW8dN0%2bOjY74eRXm%2brevKOQweX2o%3d&risl=&pid=ImgRaw&r=0" alt="cover"></div>
    <div class="player-info">
      <div class="player-title" id="player-title">No Song Playing</div>
      <div class="player-artist" id="player-artist"></div>
    </div>
    <div class="player-controls">
      <button class="player-btn" id="btn-prev" title="Previous">&#9198;</button>
      <button class="player-btn" id="btn-shuffle" title="Shuffle">&#128256;</button>
      <button class="player-btn" id="btn-repeat" title="Repeat">&#128257;</button>
      <button class="player-btn" id="btn-playpause" title="Play/Pause">&#9654;</button>
      <button class="player-btn" id="btn-next" title="Next">&#9197;</button>
    </div>
    <div class="player-progress">
      <span id="player-current">0:00</span>
      <div class="progress-bar" id="progress-bar">
        <div class="progress-bar-inner" id="progress-inner"></div>
      </div>
      <span id="player-duration">0:00</span>
    </div>
    <div class="player-volume">
      <span title="Volume">&#128266;</span>
      <input type="range" min="0" max="1" step="0.01" id="volume-range" value="0.8">
    </div>
    <audio id="audio" preload="metadata"></audio>
  </div>
  <!-- Settings Panel -->
  <div id="settings-panel">
    <div class="settings-box">
      <button class="settings-close" id="close-settings" title="Close">&times;</button>
      <div class="settings-title">Settings</div>
      <div class="settings-row">
        <label class="settings-label" for="theme-select">Theme</label>
        <select class="settings-select" id="theme-select">
          <option value="blue" selected>Blue (Default)</option>
          <option value="dark">Dark</option>
          <option value="light">Light</option>
        </select>
      </div>
      <div class="settings-row">
        <label class="settings-label" for="speed-select">Playback Speed</label>
        <select class="settings-select" id="speed-select">
          <option value="1" selected>Normal</option>
          <option value="1.25">1.25x</option>
          <option value="1.5">1.5x</option>
          <option value="2">2x</option>
          <option value="0.75">0.75x</option>
        </select>
      </div>
      <div class="settings-row">
        <label class="settings-label" for="quality-select">Audio Quality</label>
        <select class="settings-select" id="quality-select">
          <option value="high" selected>High</option>
          <option value="medium">Medium</option>
          <option value="low">Low</option>
        </select>
      </div>
      <div class="settings-row">
        <label class="settings-label" for="acc-name">Account Name</label>
        <input class="settings-input" id="acc-name" type="text" placeholder="Your name" value="Wave User">
      </div>
      <div class="settings-btn-row">
        <button class="settings-btn" id="save-settings">Save</button>
        <button class="settings-btn" id="logout-btn">Logout</button>
      </div>
    </div>
  </div>
  <script>
    // ---Songs (with cover art and audio links) ---
    const songs = [
      {
        title: "Pretty Little Fears",
        artist: "6LACK, J Cole",
        album: "East Atlanta Love Letter",
        genre: "R&B/Soul",
        cover: "https://th.bing.com/th/id/OIP.Fw0xqEk3fo1Npi2Wh1sSYwHaHa?w=165&h=180&c=7&r=0&o=7&pid=1.7&rm=3",
        audio: "Songs/6LACK, J. Cole - Pretty Little Fears (Lyrics).mp3"
      },
      {
        title: "A Lot",
        artist: "21 Savage, J Cole",
        album: "i am > i was",
        genre: "Hip Hop/Rap 路 Rap",
        cover: "https://th.bing.com/th/id/OSK.h8161fJR73Xh0jLwBuWBW3jjvawEL7dVizKg-YArP9I?w=200&h=200&c=12&o=7&cb=thws4&pid=SANGAM&rm=3",
        audio: "Songs/21 Savage - a lot (Official Video) ft. J. Cole.mp3"
      },
      {
        title: "Bank Account",
        artist: "21 Savage",
        album: "ISSA",
        genre: "Hip hop 路 trap",
        cover: "https://th.bing.com/th/id/OIP.5Hlzh8-UV2kKeoBE2mwAuQHaHa?w=120&h=120&c=8&rs=1&qlt=80&o=6&cb=thwsc4&pid=3.1",
        audio: "Songs/21 Savage - Bank Account (Lyrics).mp3"
      },
      {
        title: "Dangerous",
        artist: "21 Savage ft Lil Durk",
        album: "American Dream",
        genre: "Hip-hop 路 trap",
        cover: "https://th.bing.com/th/id/OIP.XCudU2JLCJk5_y_pSy3bKAHaHa?w=198&h=198&c=7&r=0&o=7&pid=1.7&rm=3",
        audio: "Songs/21 Savage - Dangerous (Lyrics) Feat. Lil Durk Metro Boomin.mp3"
      },
       {
        title: "Gang Shit",
        artist: "21 Savage & Metro Boomin",
        album: "Single",
        genre: "Horrorcore 路 trap",
        cover: "https://tse3.mm.bing.net/th/id/OIP.1GtNuG3Jt7pKCkcy4qKWeAHaHa?cb=ucfimg2ucfimg=1&rs=1&pid=ImgDetMain&o=7&rm=3",
        audio: "Songs/21 Savage - Gang Shit (Knife Talk OG).mp3"
      },
       {
        title: "Gun Smoke",
        artist: "21 Savage",
        album: "i am > i was",
        genre: "Hip Hop/Rap 路 Rap",
        cover: "https://th.bing.com/th/id/OSK.h8161fJR73Xh0jLwBuWBW3jjvawEL7dVizKg-YArP9I?w=200&h=200&c=12&o=7&cb=thws4&pid=SANGAM&rm=3",
        audio: "Songs/21 Savage - Gun Smoke (Official Audio).mp3"
      },
      {
        title: "Redrum",
        artist: "21 Savage",
        album: "American Dream",
        genre: "Hip-hop 路 trap",
        cover: "https://th.bing.com/th/id/OIP.XCudU2JLCJk5_y_pSy3bKAHaHa?w=198&h=198&c=7&r=0&o=7&pid=1.7&rm=3",
        audio: "Songs/21 Savage - redrum (Lyrics).mp3"
      }, 
      {
        title: "Call Me Revenge",
        artist: "21 Savage ft D4VD",
        album: "Call of Duty - Soundtrack",
        genre: "Hip-hop 路 trap",
        cover: "https://tse2.mm.bing.net/th/id/OIP.gvE2mTIy1HqKmVf_NaWxlQHaHa?cb=ucfimg2ucfimg=1&rs=1&pid=ImgDetMain&o=7&rm=3",
        audio: "Songs/21 Savage, d4vd - Call Me Revenge (Call of Duty Modern Warfare 3 - Official Game Video).mp3",
      },
      {
        title: "Glock On My Lap",
        artist: "21 Savage ft Future",
        album: "Savage Mode II",
        genre: "Hip-hop 路 trap",
        cover: "https://i1.sndcdn.com/artworks-IcSkqtF4TJgL-0-t500x500.jpg",
        audio: "Songs/21_savage_metro_boomin_glock_in_my_lap_official_music_video_mp3_47896.mp3",
      },
      {
        title: "X",
        artist: "21 Savage ft Future",
        album: "Savage Mode II",
        genre: "Hip-hop 路 trap",
        cover: "https://i.scdn.co/image/ab67616d00001e02aa57907bf0cb2ca0c8cc74bc",
        audio: "Songs/21_savage_metro_boomin_x_ft_future_official_music_video_mp3_26751.mp3",
      },
      {
        title: "Family Ties",
        artist: "Baby Keem ft Kendrick Lamar",
        album: "Call of Duty - Soundtrack",
        genre: "Hip-hop 路 trap",
        cover: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR0CcyYafFpAPfVqy6vuRNij_WJRDfZeI_gzQ&s",
        audio: "Songs/21 Savage, d4vd - Call Me Revenge (Call of Duty Modern Warfare 3 - Official Game Video).mp3",
      },
      {
        title: "Ne Nah",
        artist: "21 Savage ft Metro Boomin & Travis Scott",
        album: "American Dream",
        genre: "Hip-hop 路 trap",
        cover: "https://th.bing.com/th/id/OIP.XCudU2JLCJk5_y_pSy3bKAHaHa?w=198&h=198&c=7&r=0&o=7&pid=1.7&rm=3",
        audio: "Songs/21-Savage-n-e-nah-Ft-Travis-Scott-Metro-Boomin-(HipHopKit.com).mp3",
      },
      {
        title: "Pop Ur Sh*t",
        artist: "21 Savage ft Metro Boomin & Young Thug",
        album: "American Dream",
        genre: "Hip-hop 路 trap",
        cover: "https://th.bing.com/th/id/OIP.XCudU2JLCJk5_y_pSy3bKAHaHa?w=198&h=198&c=7&r=0&o=7&pid=1.7&rm=3",
        audio: "Songs/21-Savage-pop-ur-shit-Ft-Young-Thug-Metro-Boomin-(HipHopKit.com).mp3",
      },
    ];

    // --- Section Management ---
    const sectionArea = document.getElementById('section-area');
    const sidebarLinks = document.querySelectorAll('.sidebar-link');
    let currentSection = 'home';

    sidebarLinks.forEach(link => {
      link.addEventListener('click', function(e) {
        e.preventDefault();
        sidebarLinks.forEach(l => l.classList.remove('active'));
        link.classList.add('active');
        const section = link.getAttribute('data-section');
        currentSection = section;
        loadSection(section);
      });
    });

    function loadSection(section) {
      if (section === 'settings') {
        document.getElementById('settings-panel').style.display = 'flex';
        return;
      }
      let html = '';
      if (section === 'home' || section === 'library' || section === 'trending') {
        html = `<div id="music-cards-container" class="music-cards"></div>`;
        sectionArea.innerHTML = html;
        renderMusicCards(songs); // Show all songs
      } else if (section === 'search') {
        html = `<div id="music-cards-container" class="music-cards"></div>`;
        sectionArea.innerHTML = html;
        renderMusicCards(songs);
      } else if (section === 'genres') {
        const genres = Array.from(new Set(songs.map(s => s.genre)));
        html = `<div style="padding:2em 2em 1em 2em;">
                  <h2>Genres</h2>
                  <div style="display:flex;flex-wrap:wrap;gap:1.2em;">
                    ${genres.map(g => `<button class="settings-btn" onclick="filterGenre('${g}')">${g}</button>`).join('')}
                  </div>
                </div>
                <div id="music-cards-container" class="music-cards"></div>`;
        sectionArea.innerHTML = html;
        renderMusicCards(songs);
      } else if (section === 'playlists') {
        html = `<div style="padding:2em 2em 1em 2em;">
                  <h2>Playlists</h2>
                  <p>Coming soon!</p>
                </div>`;
        sectionArea.innerHTML = html;
      } else {
        html = `<div style="padding:2em 2em 1em 2em;">
                  <h2>Welcome to Wave!</h2>
                  <p>Enjoy your music.</p>
                </div>`;
        sectionArea.innerHTML = html;
      }
      // On all music sections, add cards
      if (section === 'home' || section === 'library' || section === 'search' || section === 'genres' || section === 'trending') {
        renderMusicCards(songs);
      }
    }

    // --- Music Cards Rendering ---
    function renderMusicCards(songsToRender) {
      const container = document.getElementById('music-cards-container');
      if (!container) return;
      container.innerHTML = '';
      songsToRender.forEach((song, idx) => {
        const card = document.createElement('div');
        card.className = 'music-card';
        card.innerHTML = `
          <div class="music-card-cover"><img src="${song.cover}" alt="${song.album} cover"></div>
          <div class="music-card-info">
            <div class="music-card-title">${song.title}</div>
            <div class="music-card-artist">${song.artist}</div>
            <div class="music-card-album">${song.album}</div>
          </div>
          <div class="music-card-actions">
            <button class="music-card-btn" title="Play" data-idx="${idx}">&#9654; Play</button>
            <a class="music-card-btn" title="Download" href="${song.audio}" download><span>&#128190;</span> Download</a>
            <a class="music-card-btn" title="Share" href="#" onclick="alert('Share')"><span>&#128257;</span> Share</a>
          </div>
        `;
        // Play button
        card.querySelector('.music-card-btn[title="Play"]').onclick = () => {
          loadSong(idx);
        };
        container.appendChild(card);
      });
    }

    // --- Search Filter ---
    const searchInput = document.getElementById('search-input');
    searchInput.addEventListener('input', function() {
      const query = searchInput.value.trim().toLowerCase();
      if (currentSection === 'genres') {
        // If genre filtered, get current genre
        let cards = songs;
        const genreBtns = document.querySelectorAll('.settings-btn');
        genreBtns.forEach(btn => {
          if (btn.classList.contains('active')) {
            cards = songs.filter(s => s.genre === btn.textContent);
          }
        });
        renderMusicCards(cards.filter(song =>
          song.title.toLowerCase().includes(query) ||
          song.artist.toLowerCase().includes(query) ||
          song.genre.toLowerCase().includes(query)
        ));
      } else {
        renderMusicCards(songs.filter(song =>
          song.title.toLowerCase().includes(query) ||
          song.artist.toLowerCase().includes(query) ||
          song.genre.toLowerCase().includes(query)
        ));
      }
    });

    // --- Genre Filter function ---
    window.filterGenre = function(genre) {
      const genreBtns = document.querySelectorAll('.settings-btn');
      genreBtns.forEach(btn => {
        btn.classList.remove('active');
        if (btn.textContent === genre) btn.classList.add('active');
      });
      renderMusicCards(songs.filter(s => s.genre === genre));
    };

    // --- Initial Load ---
    window.onload = () => {
      loadSection('home');
    };

    // --- Audio Player Logic ---
    let currentSongIdx = null;
    let isPlaying = false;
    let shuffle = false;
    let repeat = false;
    let audio = document.getElementById('audio');
    let playerCover = document.getElementById('player-cover');
    let playerTitle = document.getElementById('player-title');
    let playerArtist = document.getElementById('player-artist');
    let btnPlayPause = document.getElementById('btn-playpause');
    let btnNext = document.getElementById('btn-next');
    let btnPrev = document.getElementById('btn-prev');
    let btnRepeat = document.getElementById('btn-repeat');
    let btnShuffle = document.getElementById('btn-shuffle');
    let progressBar = document.getElementById('progress-bar');
    let progressInner = document.getElementById('progress-inner');
    let playerCurrent = document.getElementById('player-current');
    let playerDuration = document.getElementById('player-duration');
    let volumeRange = document.getElementById('volume-range');

    function loadSong(idx) {
      const song = songs[idx];
      currentSongIdx = idx;
      audio.src = song.audio;
      playerCover.src = song.cover;
      playerTitle.textContent = song.title;
      playerArtist.textContent = song.artist;
      audio.load();
      playAudio();
      highlightPlayingCard(idx);
    }
    function playAudio() {
      audio.play();
      isPlaying = true;
      btnPlayPause.innerHTML = '&#10073;&#10073;'; // Pause
    }
    function pauseAudio() {
      audio.pause();
      isPlaying = false;
      btnPlayPause.innerHTML = '&#9654;'; // Play
    }
    btnPlayPause.onclick = () => {
      if (!audio.src) {
        loadSong(0);
        return;
      }
      if (isPlaying) {
        pauseAudio();
      } else {
        playAudio();
      }
    };
    btnNext.onclick = () => {
      if (shuffle) {
        loadSong(Math.floor(Math.random() * songs.length));
      } else {
        loadSong((currentSongIdx + 1) % songs.length);
      }
    };
    btnPrev.onclick = () => {
      if (shuffle) {
        loadSong(Math.floor(Math.random() * songs.length));
      } else {
        loadSong((currentSongIdx - 1 + songs.length) % songs.length);
      }
    };
    btnRepeat.onclick = () => {
      repeat = !repeat;
      btnRepeat.style.color = repeat ? '#fff' : '#64b5f6';
      btnRepeat.style.boxShadow = repeat ? '0 0 12px 2px #1976d2cc' : '';
    };
    btnShuffle.onclick = () => {
      shuffle = !shuffle;
      btnShuffle.style.color = shuffle ? '#fff' : '#64b5f6';
      btnShuffle.style.boxShadow = shuffle ? '0 0 12px 2px #1976d2cc' : '';
    };
    audio.onended = () => {
      if (repeat) {
        playAudio();
      } else {
        btnNext.onclick();
      }
    };
    audio.ontimeupdate = () => {
      let percent = (audio.currentTime / audio.duration) * 100;
      progressInner.style.width = percent + '%';
      playerCurrent.textContent = formatTime(audio.currentTime);
      playerDuration.textContent = formatTime(audio.duration);
    };
    function formatTime(sec) {
      if (isNaN(sec)) return '0:00';
      const m = Math.floor(sec / 60);
      const s = Math.floor(sec % 60);
      return `${m}:${s < 10 ? '0' : ''}${s}`;
    }
    progressBar.onclick = (e) => {
      const rect = progressBar.getBoundingClientRect();
      const percent = (e.clientX - rect.left) / rect.width;
      audio.currentTime = percent * audio.duration;
    };
    volumeRange.oninput = () => {
      audio.volume = volumeRange.value;
    };
    audio.volume = volumeRange.value;

    // Highlight playing song card
    function highlightPlayingCard(idx) {
      document.querySelectorAll('.music-card').forEach((card, i) => {
        card.style.boxShadow = i === idx ? "0 0 36px 8px #1e88e5cc, 0 0 18px 4px #fff8" : "";
        card.style.transform = i === idx ? "scale(1.05)" : "";
      });
    }

    // --- Settings Panel Logic ---
    const settingsPanel = document.getElementById('settings-panel');
    document.getElementById('close-settings').onclick = () => {
      settingsPanel.style.display = 'none';
    };
    document.getElementById('save-settings').onclick = () => {
      // Theme
      const theme = document.getElementById('theme-select').value;
      if (theme === 'blue') {
        document.body.style.background = 'linear-gradient(115deg, #141e30 68%, #243b55 100%)';
      } else if (theme === 'dark') {
        document.body.style.background = '#191c25';
      } else if (theme === 'light') {
        document.body.style.background = 'linear-gradient(120deg, #e3f2fd 60%, #90caf9 100%)';
      }
      // Speed
      audio.playbackRate = parseFloat(document.getElementById('speed-select').value);
      // Quality (simulated)
      // Account Name
      alert('Settings saved!');
      settingsPanel.style.display = 'none';
    };
    document.getElementById('logout-btn').onclick = () => {
      alert('Logged out!');
      settingsPanel.style.display = 'none';
    };

    // --- Click outside settings panel to close ---
    settingsPanel.addEventListener('click', (e) => {
      if (e.target === settingsPanel) settingsPanel.style.display = 'none';
    });
  </script>
</body>
</html>